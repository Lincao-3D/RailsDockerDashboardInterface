<div class="container-fluid mt-4 text-white p-4 rounded bg-dark"> <%# Main page container %>
  
  <%#LOG OUT Button + Title%>
  
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1>Admin Dashboard</h1>
    <%= button_to "Log Out", destroy_admin_user_session_path, method: :delete, class: "btn btn-danger" %>
  </div>
  
  <div class="row">

    <%# Left Panel: Form %>
    <div class="col-lg-5 col-md-12 mb-4 mb-lg-0">
      <div class="p-3 border rounded border-secondary h-100">
        <h2 class="mb-3">Send Developer Tip</h2>
        <%= form_with model: @sent_tip, url: sent_tips_path, local: true do |f| %>
          <div class="mb-3">
            <%= f.label :title, class: "form-label" %>
            <%= f.text_field :title, class: "form-control" %>
          </div>
          <div class="mb-3">
            <%= f.label :message, class: "form-label" %>
            <%= f.text_area :message, required: true, class: "form-control", rows: 4 %>
          </div>
          <div class="mb-3">
            <%= f.label :image_url, class: "form-label" %>
            <%= f.text_field :image_url, class: "form-control" %>
          </div>
          <div class="mb-3">
            <%= f.label :target_display_info, class: "form-label" %>
            <%= f.text_field :target_display_info, class: "form-control" %>
          </div>
          <%= f.submit "Send Tip to All Users", class: "btn btn-primary w-100" %>
        <% end %>
      </div>
    </div>

    <%# Right Panel: History Log %>
    <div class="col-lg-7 col-md-12">
       <div class="p-3 border rounded border-secondary h-100">
      
	  <%# Clear History Button %>
	  <div class="d-flex justify-content-between align-items-center mb-3">
      <h3 class="mb-0">Sent Tips History</h3>
      <%= button_to "Clear All History", clear_history_sent_tips_path,
            method: :delete,
            data: { turbo_confirm: "Are you sure you want to delete all sent tip history? This cannot be undone." },
            class: "btn btn-warning btn-sm",
            id: "clearSentTipsHistoryButton" %>
    </div>
		<div style="max-height: 550px; overflow-y: auto;" id="sentTipsTableContainer">
		  <table class="table table-dark table-striped table-hover">
			<thead>
              <tr>
                <th style="width: 20%;">Time</th>
                <th style="width: 20%;">Title</th>
                <th style="width: 35%;">Message</th>
                <th style="width: 15%;">Image URL</th>
                <th style="width: 10%;">Status</th>
              </tr>
            </thead>
              <tbody id="sentTipsTableBody"> <%# This ID is targeted by the Turbo Stream %>
                <%= render "dashboard/sent_tips_table_body", sent_tips: @sent_tips %>
                <%# THE FOLLOWING if/else BLOCK HAS BEEN REMOVED %>
              </tbody>
            </table>
        </div>
      </div>
    </div>

  </div> <%# End of .row %>

  <%# Quick Img Tab - Button and Panel are now independent and position:fixed. Container div removed. %>
  <button id="quickImgTabButton" class="btn btn-info" type="button" title="Quick Image References">
    <%# Using a simple SVG icon for "image" %>
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-card-image" viewBox="0 0 16 16">
      <path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
      <path d="M1.5 2A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13zm13 1a.5.5 0 0 1 .5.5v6l-3.775-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.773a.5.5 0 0 0-.63.062L1.002 12V3.5a.5.5 0 0 1 .5-.5h13z"/>
    </svg>
  </button>

  <div id="quickImgPanel" class="bg-secondary text-white p-3"> <%# Ensure your CSS styles this as position:fixed too %>
    <h5>Quick Image URLs</h5>
    <div id="quickImgDropZone" class="mb-3 p-3 text-center border-dashed">
      Drag & Drop Image URLs Here
    </div>
    <div id="quickImgList" class="mb-3" style="max-height: 400px; overflow-y: auto;">
      <%# Saved images will be dynamically added here by JavaScript %>
    </div>
    <button id="deleteSelectedImgsButton" class="btn btn-danger btn-sm w-100">Delete Selected</button>
  </div>

</div> <%# End of .container-fluid %>
